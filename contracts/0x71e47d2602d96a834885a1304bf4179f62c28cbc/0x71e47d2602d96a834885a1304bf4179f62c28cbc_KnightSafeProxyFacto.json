{"SourceCode": "{{\r\n  \"language\": \"Solidity\",\r\n  \"sources\": {\r\n    \"KnightSafe/contracts/proxies/KnightSafeProxyFactory.sol\": {\r\n      \"content\": \"// SPDX-License-Identifier: GPL-3.0\\r\\npragma solidity >=0.8.0 <0.9.0;\\r\\n\\r\\nimport \\\"./KnightSafeProxy.sol\\\";\\r\\n\\r\\n/**\\r\\n * @title KnightSafeProxyFactory\\r\\n * @notice A factory contract that allow user to create new KnightSafeProxy contract\\r\\n */\\r\\ncontract KnightSafeProxyFactory {\\r\\n    event ProxyCreation(KnightSafeProxy proxy, address indexed implementation);\\r\\n\\r\\n    /**\\r\\n     * @notice Create a new KnightSafeProxy contract\\r\\n     * @param implementation Address of implementation contract\\r\\n     * @param data Payload for a message call to be sent to a new proxy contract\\r\\n     */\\r\\n    function createProxy(address implementation, bytes memory data) public returns (KnightSafeProxy proxy) {\\r\\n        proxy = new KnightSafeProxy(implementation);\\r\\n        if (data.length > 0)\\r\\n            // solhint-disable-next-line no-inline-assembly\\r\\n            assembly {\\r\\n                if eq(call(gas(), proxy, 0, add(data, 0x20), mload(data), 0, 0), 0) {\\r\\n                    revert(0, 0)\\r\\n                }\\r\\n            }\\r\\n        emit ProxyCreation(proxy, implementation);\\r\\n    }\\r\\n}\\r\\n\"\r\n    },\r\n    \"KnightSafe/contracts/proxies/KnightSafeProxy.sol\": {\r\n      \"content\": \"// SPDX-License-Identifier: GPL-3.0\\r\\npragma solidity >=0.8.0 <0.9.0;\\r\\n\\r\\n/**\\r\\n * @title KnightSafeProxy\\r\\n * @notice Using proxy design pattern to save gas consumption for distribution  \\r\\n */\\r\\ncontract KnightSafeProxy {\\r\\n    \\r\\n    // implementation address needs to be the first declared variable. \\r\\n    address internal implementation;\\r\\n\\r\\n    /**\\r\\n     * @notice Constructor function sets address of implementation contract.\\r\\n     * @param _implementation Implementation address\\r\\n     */\\r\\n    constructor(address _implementation) {\\r\\n        require(_implementation != address(0), \\\"Implementation address should not be null.\\\");\\r\\n        implementation = _implementation;\\r\\n    }\\r\\n\\r\\n    /**\\r\\n     * @notice Fallback function forwards all transactions and returns all received return data.\\r\\n     */\\r\\n    fallback() external payable {\\r\\n        // solhint-disable-next-line no-inline-assembly\\r\\n        assembly {\\r\\n            let _implementation := and(sload(0), 0xffffffffffffffffffffffffffffffffffffffff)\\r\\n\\r\\n            // copy msg.data.\\r\\n            calldatacopy(0, 0, calldatasize())\\r\\n\\r\\n            // call the implementation.\\r\\n            let result  := delegatecall(gas(), _implementation, 0, calldatasize(), 0, 0)\\r\\n\\r\\n            // copy the returned data.\\r\\n            returndatacopy(0, 0, returndatasize())\\r\\n            \\r\\n            switch result\\r\\n            // delegatecall returns 0 on error.\\r\\n            case 0 {\\r\\n                revert(0, returndatasize())\\r\\n            }\\r\\n            default {\\r\\n                return(0, returndatasize())\\r\\n            }\\r\\n        }\\r\\n    }\\r\\n}\\r\\n\"\r\n    }\r\n  },\r\n  \"settings\": {\r\n    \"optimizer\": {\r\n      \"enabled\": false,\r\n      \"runs\": 200\r\n    },\r\n    \"outputSelection\": {\r\n      \"*\": {\r\n        \"*\": [\r\n          \"evm.bytecode\",\r\n          \"evm.deployedBytecode\",\r\n          \"devdoc\",\r\n          \"userdoc\",\r\n          \"metadata\",\r\n          \"abi\"\r\n        ]\r\n      }\r\n    }\r\n  }\r\n}}", "ABI": "[{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"contract KnightSafeProxy\",\"name\":\"proxy\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"implementation\",\"type\":\"address\"}],\"name\":\"ProxyCreation\",\"type\":\"event\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"implementation\",\"type\":\"address\"},{\"internalType\":\"bytes\",\"name\":\"data\",\"type\":\"bytes\"}],\"name\":\"createProxy\",\"outputs\":[{\"internalType\":\"contract KnightSafeProxy\",\"name\":\"proxy\",\"type\":\"address\"}],\"stateMutability\":\"nonpayable\",\"type\":\"function\"}]", "ContractName": "KnightSafeProxyFactory", "CompilerVersion": "v0.8.18+commit.87f61d96", "OptimizationUsed": "0", "Runs": "200", "ConstructorArguments": "", "EVMVersion": "Default", "Library": "", "LicenseType": "", "Proxy": "0", "Implementation": "", "SwarmSource": ""}