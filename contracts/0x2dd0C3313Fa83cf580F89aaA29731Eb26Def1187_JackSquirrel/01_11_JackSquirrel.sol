// SPDX-License-Identifier: MIT

/*                                      JACK SQUIRREL
2000 NFTs
Free Mint
Max 3 per transaction
Max 9 per wallet
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@&&@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@&&&&&&&#BGGB####GG#@@@@@&@@@@@@@@@@@@@@@@@@@@@@&GGB#5YG&@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@&&@@@@#BPY?7!!!77!!!7?J5B#B&@@@@@@@@@@@@@@@@@@@@&[email protected]@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@&GY?7!!777777777777!~!7J#@@@@@@@@@@@@@@@@@@@@PPBBBG5Y?!7YGB#@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@&PJJ?7777???????77777!!!~5&@@@@@@@@@@@@@@@@@@@P5PG##PPPJ?????JP#@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@#[email protected]@@@@@@@@@@@@@@@@@BYY5PPBGGGPPYJJ??77YG&@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@#GPYJYYY5555YYY55YJJYY??J?!J&@@@@@@@@@@@@@@@&57?YPPPGP5555YYYJJYYJ?J5#@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@&##GPG555555PGG55555JJYJ?YJ7J&@@@@@@@@@@@@@#PJ7?JYY5YYYYJYYYYYJ?JJY5YYY5#@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@##GPPGPGP55PP555PYJJYJJY?5&@@@@@@@@@@@@#Y7??JYYYYJJJYYYYYY??55YJ5GP5JJP&@@@@@@@@@@@@@
@@@@@@@@@@@@@@@&#BB##PPGPYY555555YYYJJYJP&@@@@@@@@@@@BJ??JYY555YYYYYYJJJ?7Y##GPPGPP5Y?Y#@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@&#G5YY5YY55555P5YYYJYYP&@@@@@@@@@&BY7?JJYYYY5YJJYYYYYY555555YYY55555?J&@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@&#GYY?JYY55555P5Y55YY5B&@@@@@&###Y77????JYY5YJYYYYYYY55PP555PPPGGP5YJJ#@@@@@@@@@@@
@@@@@@@@@@@@@@@@&&&#[email protected]@@#PYJJJJ????77?JJJJJY55Y5555PPPPGGGPPPPP5YYG&@@@@@@@@@@@@
@@@@@@@@@@@@@@@@#BBBG5JJJJY55PPPPPPP555G&@#PYJJYYYYYJ??????JJJYY55PPPPPGGGPGGP5Y5BB#&&@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@&G5YJJJJJY555PPPGGPP55P#@[email protected]@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@&PYJJJJJY555PPPGGP55P#&[email protected]@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@&@&#5YJYYYY55PPGPPPP5P#@#[email protected]@&[email protected]@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@&##BPYJJY555PPPPGPPPPB&@BP555Y555YYY55Y555555Y55Y5P555PP5J?75&@@&[email protected]@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@&BPYYJJ?JJY5PPPPPGGGPG#@&G5YY55PP55555555555YYYY5555555P5Y?7?5BBG5?J#@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@&#BPY?????JJY5PPPPGGGPP#&[email protected]@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@&G55Y????JJJY5PGGGBBGGB&B5YYY55GGPPGGGPPPGGGP55YYYY555YY555555YY5#@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@&&#PYJ???JJYYYY5PGBBBGGG#[email protected]@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@&&#BPY???JYY55555PGBBBBGGG55555YY55PP555PGGGGGGPP5PPPPP5J???7J#&@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@&##G5YYYYY55PPPPPGGBBBGP55YYJYYYY5YYYY5GGGP5YYY55555P5J!^::[email protected]@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@&#GP555555PPPPGGGGGGP55YYYYYYYYJYYY5P5555YYYYYYY555J7~^:[email protected]@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@&&#BGP55PPPPPPPPPPGGGPP55YYYYJJYY55555YYY55Y55YYYYJ?7~:^[email protected]@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@&#BGGP5555PPPGGPPPPPPPPP5Y55YY5555YYYYYYYYY55YYYYYJ7!~:!&@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@&#BGPP555555PPPGGGGGGPPPP55YYY5Y5Y5YJYJJYY55Y??JJ?7!~^[email protected]@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@&BGP555555PPPPPPP5555YY5P55YYPYJJYYPGGGPY??7!!~^[email protected]@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@&[email protected]@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@&&#BGGGGGBGGPPP55PP5PPPP5Y5GGGGGPPYJJ??7?5G&@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@&&#&&&&@##&&##BG55P5YJJJJJYPGB&@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#G5YJJ??5GB#BBG#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@&BP5YJJ5PBBGGB#&@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#GGPP555GGB#&@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@&&###&&&@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
*/
pragma solidity ^0.8.15;

import "@openzeppelin/contracts/access/Ownable.sol";
import "erc721a/contracts/ERC721A.sol";

contract JackSquirrel is ERC721A, Ownable {
    using Strings for uint;
    enum SaleStatus{ PAUSED, PUBLIC }

    uint128 public constant maxSupply = 2000;
    uint128 public constant maxMintAmountPerTx = 3;
    uint128 public constant maxPerWallet = 9;
    uint128 public price = 0 ether;
    SaleStatus public saleStatus = SaleStatus.PUBLIC;
    string private _baseURL = "ipfs://bafybeifhhpeguthgjjdvulajokwmza245gagr3jbacyddiaiyix5j3l6o4/";
    
    mapping(address => uint) private _mintedCount;

    constructor() ERC721A("JackSquirrel", "JA$Q"){}
    
   
      
      function burn(uint256 tokenId) external{
        _burn(tokenId, true); // no approve function, but need to check if owner
    }
    
    
    /// @notice Set base metadata URL
    function setBaseURL(string memory url) external onlyOwner {
        _baseURL = url;
    }

    /// @dev override base uri. It will be combined with token ID
    function _baseURI() internal view override returns (string memory) {
        return _baseURL;
    }

    function _startTokenId() internal pure override returns (uint256) {
        return 1;
    }

    /// @notice Update current sale stage
    function setSaleStatus(SaleStatus status) external onlyOwner {
        saleStatus = status;
    }

    /// @notice Update public mint price
    function setPublicMintPrice(uint128 _price) external onlyOwner {
        price = _price;
    }

    /// @notice Withdraw contract balance
    function withdraw() external onlyOwner {
        uint balance = address(this).balance;
        require(balance > 0, "No balance");
        
        payable(0x53541B52505c5b86A22b3c4d3E00F5787816C3Db).transfer((balance * 10000)/10000);
        
    }

    /// @notice Allows owner to mint tokens to a specified address
    function airdrop(address to, uint count) external onlyOwner {
        require(_totalMinted() + count <= maxSupply, "Request exceeds collection size");
        _safeMint(to, count);
    }

    /// @notice Get token URI. In case of delayed reveal we give user the json of the placeholer metadata.
    /// @param tokenId token ID
    function tokenURI(uint tokenId) public view override returns (string memory) {
        require(_exists(tokenId), "ERC721Metadata: URI query for nonexistent token");
        string memory baseURI = _baseURI();

        return bytes(baseURI).length > 0 
            ? string(abi.encodePacked(baseURI, tokenId.toString(), ".json")) 
            : "";
    }
    
    function mint( uint count) external payable {
        require(saleStatus != SaleStatus.PAUSED, " Sales are off");
        require(_totalMinted() + count <= maxSupply, " Number of requested tokens will exceed collection size");
        require(count <= maxMintAmountPerTx, " Number of requested tokens exceeds allowance");
        require(_mintedCount[msg.sender] + count <= maxPerWallet, " Max token per wallet exceeded");
         {
            require(msg.value >= count * price, " Ether value sent is not sufficient");
            
            _mintedCount[msg.sender] += count;
        }
        _safeMint(msg.sender, count);
    }
    
}

//squitsquitSQUITsquitSQUITSQUITsquitsquitsquitsquitSQUITsquitSQUITSQUITSQUIRTSQUITsquitsquitSQUITSQUITsquitsquitsquitsquitSQUITsquit