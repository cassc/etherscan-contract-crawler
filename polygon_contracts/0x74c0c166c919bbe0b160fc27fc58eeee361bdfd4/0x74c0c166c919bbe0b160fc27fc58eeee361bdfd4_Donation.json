{"SourceCode": "// File: contracts/Donation.sol\r\n\r\n\r\n\r\npragma solidity >=0.7.0 <0.9.0;\r\n\r\ncontract Donation {\r\n    address public owner;\r\n    address[] public recipients;\r\n    bool public autoDistribute;\r\n\r\n    event DonationReceived(address indexed from, uint indexed amount);\r\n    event DonationDistributed(address[] indexed recipients, uint indexed amountPerRecipient);\r\n\r\n    event OwnerChanged(address indexed newOwner);\r\n    event RecipientsChanged(address indexed owner, address[] indexed recipients);\r\n\r\n    modifier onlyOwner() {\r\n        require(owner == msg.sender, \"You are not the owner\");\r\n        _;\r\n    }\r\n\r\n    constructor(address _owner, address[] memory _recipients) {\r\n        owner = _owner;\r\n        autoDistribute = true;\r\n\r\n        _setRecipients(_recipients);\r\n    }\r\n\r\n    function distribute() public {\r\n        uint amount = address(this).balance / recipients.length;\r\n\r\n        for (uint i = 0; i < recipients.length; i += 1) {\r\n            (bool success,) = recipients[i].call{value: amount}(\"\");\r\n\r\n            require(success);\r\n        }\r\n\r\n        emit DonationDistributed(recipients, amount);\r\n    }\r\n\r\n    function getBalance() public view returns (uint) {\r\n        return address(this).balance;\r\n    }\r\n\r\n    function setOwner(address _newOwner) public onlyOwner {\r\n        owner = _newOwner;\r\n\r\n        emit OwnerChanged(_newOwner);\r\n    }\r\n\r\n    function getRecipients() public view returns (address[] memory) {\r\n        return recipients;\r\n    }\r\n\r\n    function setRecipients(address[] memory _recipients) public onlyOwner {\r\n        _setRecipients(_recipients);\r\n    }\r\n\r\n    function setAutoDistribute(bool _autoDistribute) public onlyOwner {\r\n        autoDistribute = _autoDistribute;\r\n    }\r\n\r\n    function _setRecipients(address[] memory _recipients) private {\r\n        require(_recipients.length > 0, \"Must have recipients\");\r\n\r\n        recipients = _recipients;\r\n\r\n        emit RecipientsChanged(msg.sender, recipients); // owner or factory\r\n    }\r\n\r\n    receive() external payable {\r\n        emit DonationReceived(msg.sender, msg.value);\r\n\r\n        // auto distribute if balance is >= 10 matic\r\n        if (autoDistribute && address(this).balance >= 10 ether) {\r\n            distribute();\r\n        }\r\n    }\r\n}", "ABI": "[{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_owner\",\"type\":\"address\"},{\"internalType\":\"address[]\",\"name\":\"_recipients\",\"type\":\"address[]\"}],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address[]\",\"name\":\"recipients\",\"type\":\"address[]\"},{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"amountPerRecipient\",\"type\":\"uint256\"}],\"name\":\"DonationDistributed\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"from\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"DonationReceived\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"newOwner\",\"type\":\"address\"}],\"name\":\"OwnerChanged\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"owner\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address[]\",\"name\":\"recipients\",\"type\":\"address[]\"}],\"name\":\"RecipientsChanged\",\"type\":\"event\"},{\"inputs\":[],\"name\":\"autoDistribute\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"distribute\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"getBalance\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"getRecipients\",\"outputs\":[{\"internalType\":\"address[]\",\"name\":\"\",\"type\":\"address[]\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"owner\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"recipients\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bool\",\"name\":\"_autoDistribute\",\"type\":\"bool\"}],\"name\":\"setAutoDistribute\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_newOwner\",\"type\":\"address\"}],\"name\":\"setOwner\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address[]\",\"name\":\"_recipients\",\"type\":\"address[]\"}],\"name\":\"setRecipients\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"stateMutability\":\"payable\",\"type\":\"receive\"}]", "ContractName": "Donation", "CompilerVersion": "v0.8.7+commit.e28d00a7", "OptimizationUsed": "0", "Runs": "200", "ConstructorArguments": "000000000000000000000000dc010298f090214a3da6e14f64c27f957b6a481e00000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000005000000000000000000000000dc010298f090214a3da6e14f64c27f957b6a481e000000000000000000000000750cd556c2d1f55799a8b64a5390c107357900ab00000000000000000000000067f8fda53218ff8294bedb37dc10f4655ac93fac0000000000000000000000008bcc3389261679718db663b94e255485f81d2ab40000000000000000000000006e3f9be20d78a03ee53d05580a9a09fe7ce269f0", "EVMVersion": "Default", "Library": "", "LicenseType": "GNU GPLv3", "Proxy": "0", "Implementation": "", "SwarmSource": "ipfs://dc279a220d6cbde24a556901c21d23a2d0b7c9a0f1e902ee314c714a2a58d095"}