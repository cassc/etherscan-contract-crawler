{"SourceCode": "//SPDX-License-Identifier: MIT\r\n\r\npragma solidity ^0.8.13;\r\n\r\ninterface IERC20 {\r\n    function transferFrom(address from, address to, uint256 amount) external;\r\n    function transfer(address to, uint256 amount) external;\r\n    function decimals() external returns (uint256);\r\n    function balanceOf(address user) external returns (uint256);\r\n}\r\n\r\n\r\ninterface AggregatorV3Interface {\r\n    function decimals() external view returns (uint8);\r\n    function latestAnswer() external view returns (uint256);\r\n}\r\n\r\n\r\ncontract SwapDeposit {\r\n    address public owner;\r\n    address public fundsReceiver;\r\n\r\n    AggregatorV3Interface public oracle;\r\n\r\n    struct SupportedToken {\r\n        IERC20 token;\r\n        AggregatorV3Interface oracle;\r\n        bool supported;\r\n        uint256 oracleDecimals;\r\n    }\r\n\r\n    mapping(address => SupportedToken) public supportedTokens;\r\n\r\n    event Deposit(\r\n        address sender, \r\n        uint256 amount, \r\n        uint256 oraclePrice,\r\n        address token,\r\n        string receiver\r\n    );\r\n\r\n    event ModifySupportedToken(\r\n        address token,\r\n        address oracle,\r\n        bool isNowSuppored\r\n    );\r\n\r\n    constructor(address newOwner, address newFundsReceiver){\r\n        owner = newOwner;\r\n        fundsReceiver = newFundsReceiver;\r\n    }\r\n\r\n    modifier onlyOwner(){\r\n        require(msg.sender == owner);\r\n        _;\r\n    }\r\n\r\n    function transferOwnership(address _new, address _fundsReceiver) external onlyOwner {\r\n        owner = _new;\r\n        fundsReceiver = _fundsReceiver;\r\n    }\r\n\r\n    function modifySupportedToken(address _token, address _oracle, bool _isSupported) external onlyOwner {\r\n        uint256 oracleDecimals = AggregatorV3Interface(_oracle).decimals();\r\n\r\n        supportedTokens[_token] = SupportedToken({\r\n            token: IERC20(_token),\r\n            oracle: AggregatorV3Interface(_oracle),\r\n            supported: _isSupported,\r\n            oracleDecimals: oracleDecimals\r\n        });\r\n\r\n        emit ModifySupportedToken(_token, _oracle, _isSupported);\r\n    }\r\n\r\n    function deposit(address token, uint256 amount, string memory receiver) external {\r\n        require(supportedTokens[token].supported, \"token not supported\");\r\n\r\n        IERC20(token).transferFrom(msg.sender, fundsReceiver, amount);\r\n\r\n        uint256 oraclePrice = supportedTokens[token].oracle.latestAnswer();\r\n\r\n        emit Deposit(msg.sender, amount, oraclePrice, token, receiver);\r\n    }\r\n\r\n    function call(address target, uint256 value, string memory signature, bytes memory data) external onlyOwner {\r\n        bytes memory callData;\r\n        if (bytes(signature).length == 0) {\r\n            callData = data;\r\n        } else {\r\n            callData = abi.encodePacked(bytes4(keccak256(bytes(signature))), data);\r\n        }\r\n\r\n        (bool success, ) = target.call{value: value}(callData);\r\n        require(success, \"Transaction execution reverted.\");\r\n    }\r\n}", "ABI": "[{\"inputs\":[{\"internalType\":\"address\",\"name\":\"newOwner\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"newFundsReceiver\",\"type\":\"address\"}],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"address\",\"name\":\"sender\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"oraclePrice\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"address\",\"name\":\"token\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"string\",\"name\":\"receiver\",\"type\":\"string\"}],\"name\":\"Deposit\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"address\",\"name\":\"token\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"address\",\"name\":\"oracle\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"bool\",\"name\":\"isNowSuppored\",\"type\":\"bool\"}],\"name\":\"ModifySupportedToken\",\"type\":\"event\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"target\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"value\",\"type\":\"uint256\"},{\"internalType\":\"string\",\"name\":\"signature\",\"type\":\"string\"},{\"internalType\":\"bytes\",\"name\":\"data\",\"type\":\"bytes\"}],\"name\":\"call\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"token\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"},{\"internalType\":\"string\",\"name\":\"receiver\",\"type\":\"string\"}],\"name\":\"deposit\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"fundsReceiver\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_token\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"_oracle\",\"type\":\"address\"},{\"internalType\":\"bool\",\"name\":\"_isSupported\",\"type\":\"bool\"}],\"name\":\"modifySupportedToken\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"oracle\",\"outputs\":[{\"internalType\":\"contract AggregatorV3Interface\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"owner\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"name\":\"supportedTokens\",\"outputs\":[{\"internalType\":\"contract IERC20\",\"name\":\"token\",\"type\":\"address\"},{\"internalType\":\"contract AggregatorV3Interface\",\"name\":\"oracle\",\"type\":\"address\"},{\"internalType\":\"bool\",\"name\":\"supported\",\"type\":\"bool\"},{\"internalType\":\"uint256\",\"name\":\"oracleDecimals\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_new\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"_fundsReceiver\",\"type\":\"address\"}],\"name\":\"transferOwnership\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"}]", "ContractName": "SwapDeposit", "CompilerVersion": "v0.8.13+commit.abaa5c0e", "OptimizationUsed": "0", "Runs": "200", "ConstructorArguments": "0000000000000000000000000e61a8fb14f6ac999646212d30b2192cd02080dd0000000000000000000000000e61a8fb14f6ac999646212d30b2192cd02080dd", "EVMVersion": "Default", "Library": "", "LicenseType": "MIT", "Proxy": "0", "Implementation": "", "SwarmSource": "ipfs://4ca83d615e8a5c5927dc88973ba60e9747c9029c9983c810f818d094aab14ff8"}