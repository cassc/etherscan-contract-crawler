{"SourceCode": "// SPDX-License-Identifier: MIT\r\npragma solidity ^0.8.14;\r\n\r\ncontract AgencyContract {\r\n    address public poolAddress;\r\n    address public middleAddress;\r\n    address public owner;\r\n    mapping(address => uint256) public nonceOf;\r\n\r\n    constructor(address _realContractAddress,address _middleUcexAddress) {\r\n        poolAddress = _realContractAddress;\r\n        middleAddress = _middleUcexAddress;\r\n        owner = msg.sender;\r\n    }\r\n\r\n    modifier  onlyOwner(){\r\n        require(msg.sender == owner,\"Not the owner\");\r\n        _;\r\n    }\r\n\r\n    function payForTicket(address from , uint256 ucAmount, uint256 nonce) public  payable  {\r\n        require(nonce > nonceOf[msg.sender], \"Invalid nonce\");\r\n        (bool success,) = middleAddress.call(abi.encodeWithSignature(\"payForTicket(address,uint256)\", from,ucAmount));\r\n        require(success,\"Delegatecallfailed\");\r\n        nonceOf[msg.sender] = nonce;\r\n    }\r\n\r\n    function autoSysRepo(\r\n        address ucReceiver,\r\n        uint256 ucAmount,\r\n        address[] calldata tokenReceivers,\r\n        uint256[] calldata tokenAmounts\r\n        ) external onlyOwner {\r\n            (bool success,) = middleAddress.call(abi.encodeWithSignature(\"autoSysRepo(address,uint256,address[],uint256[])\", ucReceiver, ucAmount, tokenReceivers, tokenAmounts));\r\n            require(success,\"Delegatecallfailed\");\r\n    }\r\n    \r\n    function securityDeposit(\r\n       address from ,uint256 usdtAmount,uint256 nonce\r\n        ) public payable  {\r\n            require(nonce > nonceOf[msg.sender], \"Invalid nonce\");\r\n            (bool success,) = middleAddress.call(abi.encodeWithSignature(\"securityDeposit(address,uint256)\", from, usdtAmount));\r\n            require(success,\"Delegatecallfailed\");\r\n            nonceOf[msg.sender] = nonce;\r\n    }\r\n\r\n    function USDTtoUC(address from , uint256 Amount,uint256 nonce) public  payable  \r\n    { \r\n        require(nonce > nonceOf[msg.sender], \"Invalid nonce\");\r\n        (bool success,) = middleAddress.call(abi.encodeWithSignature(\"USDTtoUC(address,uint256)\", from, Amount));\r\n        require(success,\"Delegatecallfailed\");\r\n        nonceOf[msg.sender] = nonce;\r\n    }\r\n\r\n    function UCtoUSDT(address from , uint256 Amount,uint256 nonce) public  payable  \r\n    {\r\n        require(nonce > nonceOf[msg.sender], \"Invalid nonce\");\r\n        (bool success,) = middleAddress.call(abi.encodeWithSignature(\"UCtoUSDT(address,uint256)\", from, Amount));\r\n        require(success,\"Delegatecallfailed\");\r\n        nonceOf[msg.sender] = nonce;\r\n    }\r\n\r\n    function CxToUsdt(address from , uint256 Amount,uint256 nonce) public  payable  {\r\n        require(nonce > nonceOf[msg.sender], \"Invalid nonce\");\r\n         (bool success,) = poolAddress.call(abi.encodeWithSignature(\"CxToUsdt(address,uint256)\", from, Amount));\r\n        require(success,\"Delegatecallfailed\");\r\n        nonceOf[msg.sender] = nonce;\r\n    }\r\n\r\n    function UsdtToCx(address from , uint256 Amount,uint256 nonce) public  payable  {\r\n        require(nonce > nonceOf[msg.sender], \"Invalid nonce\");\r\n        (bool success,) = poolAddress.call(abi.encodeWithSignature(\"UsdtToCx(address,uint256)\", from, Amount));\r\n        require(success,\"Delegatecallfailed\");\r\n        nonceOf[msg.sender] = nonce;\r\n    }\r\n    \r\n    function setContractToken(address addr) external onlyOwner {\r\n        poolAddress = addr;\r\n    }\r\n    \r\n    function setMiddleContractToken(address addr) external onlyOwner {\r\n        middleAddress = addr;\r\n    }\r\n}", "ABI": "[{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_realContractAddress\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"_middleUcexAddress\",\"type\":\"address\"}],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"from\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"Amount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"nonce\",\"type\":\"uint256\"}],\"name\":\"CxToUsdt\",\"outputs\":[],\"stateMutability\":\"payable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"from\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"Amount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"nonce\",\"type\":\"uint256\"}],\"name\":\"UCtoUSDT\",\"outputs\":[],\"stateMutability\":\"payable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"from\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"Amount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"nonce\",\"type\":\"uint256\"}],\"name\":\"USDTtoUC\",\"outputs\":[],\"stateMutability\":\"payable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"from\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"Amount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"nonce\",\"type\":\"uint256\"}],\"name\":\"UsdtToCx\",\"outputs\":[],\"stateMutability\":\"payable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"ucReceiver\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"ucAmount\",\"type\":\"uint256\"},{\"internalType\":\"address[]\",\"name\":\"tokenReceivers\",\"type\":\"address[]\"},{\"internalType\":\"uint256[]\",\"name\":\"tokenAmounts\",\"type\":\"uint256[]\"}],\"name\":\"autoSysRepo\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"middleAddress\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"name\":\"nonceOf\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"owner\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"from\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"ucAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"nonce\",\"type\":\"uint256\"}],\"name\":\"payForTicket\",\"outputs\":[],\"stateMutability\":\"payable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"poolAddress\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"from\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"usdtAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"nonce\",\"type\":\"uint256\"}],\"name\":\"securityDeposit\",\"outputs\":[],\"stateMutability\":\"payable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"addr\",\"type\":\"address\"}],\"name\":\"setContractToken\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"addr\",\"type\":\"address\"}],\"name\":\"setMiddleContractToken\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"}]", "ContractName": "AgencyContract", "CompilerVersion": "v0.8.18+commit.87f61d96", "OptimizationUsed": "1", "Runs": "200", "ConstructorArguments": "000000000000000000000000867853484c78a100223587b8443ecd8ce7fb0fac000000000000000000000000c958842946ec0b593512e1ebbb4c8acecae773e9", "EVMVersion": "Default", "Library": "", "LicenseType": "MIT", "Proxy": "0", "Implementation": "", "SwarmSource": "ipfs://938f38bc38903048d23fe5e42ccd75db3a4360cb0279f5bedf4c677104ad8471"}