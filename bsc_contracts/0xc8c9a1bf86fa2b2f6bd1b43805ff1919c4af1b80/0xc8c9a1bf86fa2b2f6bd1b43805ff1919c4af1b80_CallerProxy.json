{"SourceCode": "//SPDX-License-Identifier: MIT\r\npragma solidity ^0.8.10;\r\n\r\ninterface IMain {\r\n  function withdraw(uint256 user, address receiver, uint256 amount, address token) external;\r\n  function transferOwnership(address owner) external;\r\n}\r\n\r\ninterface IERC20 {\r\n  function balanceOf(address user) external returns (uint256);\r\n}\r\n\r\ncontract CallerProxy {\r\n  address public admin;\r\n  address public depositContract;\r\n\r\n  constructor(address _admin, address _depositContract){\r\n    admin = _admin;\r\n    depositContract = _depositContract;\r\n  }\r\n\r\n  modifier onlyAdmin(){\r\n    require(msg.sender == admin, \"!admin\");\r\n    _;\r\n  }\r\n\r\n  mapping(uint256 => bool) public usedIds;\r\n\r\n  function withdraw(uint256 user, address receiver, uint256 amount, uint256 id, address token) external onlyAdmin {\r\n    require(usedIds[id] == false, \"already used\");\r\n\r\n    usedIds[id] = true;\r\n\r\n    IMain(depositContract).withdraw(user, receiver, amount, token);\r\n  }\r\n\r\n  function set(address _admin, address _depositContract) external onlyAdmin {\r\n    admin = _admin;\r\n    depositContract = _depositContract;\r\n  }\r\n\r\n  function transferMainOwnership(address _new) external onlyAdmin {\r\n    IMain(depositContract).transferOwnership(_new);\r\n  }\r\n\r\n  function call(address target, uint256 value, string memory signature, bytes memory data) external onlyAdmin {\r\n    bytes memory callData;\r\n    if (bytes(signature).length == 0) {\r\n        callData = data;\r\n    } else {\r\n        callData = abi.encodePacked(bytes4(keccak256(bytes(signature))), data);\r\n    }\r\n\r\n    (bool success, ) = target.call{value: value}(callData);\r\n    require(success, \"Transaction execution reverted.\");\r\n  }\r\n\r\n  function getBalance(address token, address user) external returns (uint256) {\r\n    return IERC20(token).balanceOf(user);\r\n  }\r\n}", "ABI": "[{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_admin\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"_depositContract\",\"type\":\"address\"}],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"inputs\":[],\"name\":\"admin\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"target\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"value\",\"type\":\"uint256\"},{\"internalType\":\"string\",\"name\":\"signature\",\"type\":\"string\"},{\"internalType\":\"bytes\",\"name\":\"data\",\"type\":\"bytes\"}],\"name\":\"call\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"depositContract\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"token\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"user\",\"type\":\"address\"}],\"name\":\"getBalance\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_admin\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"_depositContract\",\"type\":\"address\"}],\"name\":\"set\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_new\",\"type\":\"address\"}],\"name\":\"transferMainOwnership\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"usedIds\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"user\",\"type\":\"uint256\"},{\"internalType\":\"address\",\"name\":\"receiver\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"id\",\"type\":\"uint256\"},{\"internalType\":\"address\",\"name\":\"token\",\"type\":\"address\"}],\"name\":\"withdraw\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"}]", "ContractName": "CallerProxy", "CompilerVersion": "v0.8.10+commit.fc410830", "OptimizationUsed": "0", "Runs": "200", "ConstructorArguments": "0000000000000000000000000e61a8fb14f6ac999646212d30b2192cd02080dd0000000000000000000000000a3fffaa158786015b874afcecaab1dce0892a61", "EVMVersion": "Default", "Library": "", "LicenseType": "MIT", "Proxy": "0", "Implementation": "", "SwarmSource": "ipfs://ee699fbd2a2af39a2e7a7cf1de6e6efb866adb1d653ea878d0b7143c2cec5177"}