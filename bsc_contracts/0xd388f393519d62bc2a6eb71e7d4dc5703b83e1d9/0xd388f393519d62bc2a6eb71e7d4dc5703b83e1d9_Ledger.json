{"SourceCode": "{{\r\n  \"language\": \"Solidity\",\r\n  \"sources\": {\r\n    \"/bb/contracts/Ledger.sol\": {\r\n      \"content\": \"// SPDX-License-Identifier: MIT\\n\\n// Deployed with the Atlas IDE\\n// https://app.atlaszk.com\\n\\npragma solidity ^0.8.0;\\n\\ncontract Ledger {\\n\\n    struct User {\\n        string oldWalletId;\\n        uint oldUserId;\\n        string newWalletId;\\n        uint newUserId;\\n        address oldAddress;\\n    }\\n\\n    event UserReplaced(address oldAddress,uint oldUserId, string oldWalletId, uint newUserId, string newWalletId);\\n\\n    // userId -> User\\n    mapping(uint => User) public users;\\n    mapping(uint => bool) public userReplaced;\\n    address public owner;\\n    \\n    constructor() {\\n        owner = msg.sender;\\n    }\\n\\n    modifier onlyOwner() {\\n        require(msg.sender == owner, \\\"Only owner can call\\\");\\n        _;\\n    }\\n\\n    function record(string memory _oldWalletId, uint _oldUserId, string memory _newWalletId, uint _newUserId) public  returns(bool) {\\n\\n        require(!userReplaced[_oldUserId], \\\"User has already been replaced\\\");\\n        \\n        // \u6bcf\u4e2a\u65e7\u7528\u6237 \u53ea\u80fd\u66ff\u6362\u4e00\u6b21\\n        User storage user = users[_oldUserId];\\n \\n        // \u8bb0\u5f55\u7528\u6237\u4fe1\u606f\\n        user.oldAddress = msg.sender;\\n        user.oldWalletId = _oldWalletId;\\n        user.oldUserId = _oldUserId;\\n        user.newWalletId = _newWalletId;\\n        user.newUserId = _newUserId;\\n\\n        userReplaced[_oldUserId] = true;\\n        emit UserReplaced(msg.sender, _oldUserId, _oldWalletId, _newUserId, _newWalletId);\\n\\n        return true;\\n\\n    }\\n\\n    function set(uint userId, bool value) public onlyOwner {\\n        userReplaced[userId] = value;\\n    }\\n\\n}\\n\\n \"\r\n    }\r\n  },\r\n  \"settings\": {\r\n    \"optimizer\": {\r\n      \"enabled\": true,\r\n      \"runs\": 200\r\n    },\r\n    \"libraries\": {},\r\n    \"outputSelection\": {\r\n      \"*\": {\r\n        \"*\": [\r\n          \"evm.bytecode\",\r\n          \"evm.deployedBytecode\",\r\n          \"devdoc\",\r\n          \"userdoc\",\r\n          \"metadata\",\r\n          \"abi\"\r\n        ]\r\n      }\r\n    }\r\n  }\r\n}}", "ABI": "[{\"inputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"address\",\"name\":\"oldAddress\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"oldUserId\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"string\",\"name\":\"oldWalletId\",\"type\":\"string\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"newUserId\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"string\",\"name\":\"newWalletId\",\"type\":\"string\"}],\"name\":\"UserReplaced\",\"type\":\"event\"},{\"inputs\":[],\"name\":\"owner\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"string\",\"name\":\"_oldWalletId\",\"type\":\"string\"},{\"internalType\":\"uint256\",\"name\":\"_oldUserId\",\"type\":\"uint256\"},{\"internalType\":\"string\",\"name\":\"_newWalletId\",\"type\":\"string\"},{\"internalType\":\"uint256\",\"name\":\"_newUserId\",\"type\":\"uint256\"}],\"name\":\"record\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"userId\",\"type\":\"uint256\"},{\"internalType\":\"bool\",\"name\":\"value\",\"type\":\"bool\"}],\"name\":\"set\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"userReplaced\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"users\",\"outputs\":[{\"internalType\":\"string\",\"name\":\"oldWalletId\",\"type\":\"string\"},{\"internalType\":\"uint256\",\"name\":\"oldUserId\",\"type\":\"uint256\"},{\"internalType\":\"string\",\"name\":\"newWalletId\",\"type\":\"string\"},{\"internalType\":\"uint256\",\"name\":\"newUserId\",\"type\":\"uint256\"},{\"internalType\":\"address\",\"name\":\"oldAddress\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"}]", "ContractName": "Ledger", "CompilerVersion": "v0.8.19+commit.7dd6d404", "OptimizationUsed": "1", "Runs": "200", "ConstructorArguments": "", "EVMVersion": "Default", "Library": "", "LicenseType": "", "Proxy": "0", "Implementation": "", "SwarmSource": ""}