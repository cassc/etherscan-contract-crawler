{"SourceCode": "# @version 0.3.10\r\n\"\"\"\r\n@title CCIP Block Hash Receiver\r\n@license MIT\r\n@author Curve Finance\r\n\"\"\"\r\n\r\nstruct EVMTokenAmount:\r\n    token: address\r\n    amount: uint256\r\n\r\nstruct Any2EVMMessage:\r\n    message_id: bytes32\r\n    source_chain_selector: uint64\r\n    sender: Bytes[32]\r\n    data: Bytes[64]\r\n    token_amounts: DynArray[EVMTokenAmount, 1]\r\n\r\n\r\nROOT_SENDER: public(immutable(address))\r\nROOT_CHAIN_SELECTOR: public(immutable(uint64))\r\nORACLE: public(immutable(address))\r\nCCIP_ROUTER: public(immutable(address))\r\n\r\n\r\n@external\r\ndef __init__(_root_sender: address, _root_chain_selector: uint64, _oracle: address, _ccip_router: address):\r\n    ROOT_SENDER = _root_sender\r\n    ROOT_CHAIN_SELECTOR = _root_chain_selector\r\n    ORACLE = _oracle\r\n    CCIP_ROUTER = _ccip_router\r\n\r\n\r\n@external\r\ndef ccipReceive(_message: Any2EVMMessage):\r\n    assert msg.sender == CCIP_ROUTER\r\n    assert _message.source_chain_selector == ROOT_CHAIN_SELECTOR\r\n    assert _abi_decode(_message.sender, address) == ROOT_SENDER\r\n\r\n    _: bool = raw_call(\r\n        ORACLE,\r\n        concat(method_id(\"commit_block_hash(uint256,bytes32)\"), _message.data),\r\n        revert_on_failure=False\r\n    )\r\n\r\n\r\n@view\r\n@external\r\ndef supportsInterface(_interface_id: bytes4) -> bool:\r\n    if _interface_id == 0xffffffff:\r\n        return False\r\n    return True", "ABI": "[{\"stateMutability\":\"nonpayable\",\"type\":\"constructor\",\"inputs\":[{\"name\":\"_root_sender\",\"type\":\"address\"},{\"name\":\"_root_chain_selector\",\"type\":\"uint64\"},{\"name\":\"_oracle\",\"type\":\"address\"},{\"name\":\"_ccip_router\",\"type\":\"address\"}],\"outputs\":[]},{\"stateMutability\":\"nonpayable\",\"type\":\"function\",\"name\":\"ccipReceive\",\"inputs\":[{\"name\":\"_message\",\"type\":\"tuple\",\"components\":[{\"name\":\"message_id\",\"type\":\"bytes32\"},{\"name\":\"source_chain_selector\",\"type\":\"uint64\"},{\"name\":\"sender\",\"type\":\"bytes\"},{\"name\":\"data\",\"type\":\"bytes\"},{\"name\":\"token_amounts\",\"type\":\"tuple[]\",\"components\":[{\"name\":\"token\",\"type\":\"address\"},{\"name\":\"amount\",\"type\":\"uint256\"}]}]}],\"outputs\":[]},{\"stateMutability\":\"view\",\"type\":\"function\",\"name\":\"supportsInterface\",\"inputs\":[{\"name\":\"_interface_id\",\"type\":\"bytes4\"}],\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}]},{\"stateMutability\":\"view\",\"type\":\"function\",\"name\":\"ROOT_SENDER\",\"inputs\":[],\"outputs\":[{\"name\":\"\",\"type\":\"address\"}]},{\"stateMutability\":\"view\",\"type\":\"function\",\"name\":\"ROOT_CHAIN_SELECTOR\",\"inputs\":[],\"outputs\":[{\"name\":\"\",\"type\":\"uint64\"}]},{\"stateMutability\":\"view\",\"type\":\"function\",\"name\":\"ORACLE\",\"inputs\":[],\"outputs\":[{\"name\":\"\",\"type\":\"address\"}]},{\"stateMutability\":\"view\",\"type\":\"function\",\"name\":\"CCIP_ROUTER\",\"inputs\":[],\"outputs\":[{\"name\":\"\",\"type\":\"address\"}]}]", "ContractName": "CCIP Block Hash Receiver", "CompilerVersion": "vyper:0.3.10", "OptimizationUsed": "0", "Runs": "0", "ConstructorArguments": "00000000000000000000000088478447d91bcaa015c028e83d6ea16cf32809aa00000000000000000000000000000000000000000000000045849994fc9c7b15000000000000000000000000f3bc9e5fa891977dca765ff52e8f22a1f7d49c1f000000000000000000000000536d7e53d0adeb1f20e7c81fea45d02ec9dbd698", "EVMVersion": "Default", "Library": "", "LicenseType": "None", "Proxy": "0", "Implementation": "", "SwarmSource": ""}